<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/redux-mixin.html">
<link rel="import" href="../mixins/ff-char-class-mixin.html">
<link rel="import" href="../mixins/ff-screen-mixin.html">
<link rel="import" href="../ff-bordered-text/ff-bordered-text.html">
<link rel="import" href="../ff-bordered/ff-bordered.html">
<link rel="import" href="../ff-shop-party/ff-shop-party.html">
<link rel="import" href="../ff-shop-inventory/ff-shop-inventory.html">
<link rel="import" href="../ff-shop-decision/ff-shop-decision.html">
<link rel="import" href="ff-inventory-loader.html">
<link rel="import" href="ff-shopkeepers.html">
<link rel="import" href="ff-shop-states.html">
<link rel="import" href="ff-shop-screen-css.html">

<dom-module id="ff-shop-screen">
  <template>
    <style include="ff-shop-screen-css"></style>

    <ff-inventory-loader
      char-items="{{ charItems }}"
      inventory-for-char="{{ charInventory }}"></ff-inventory-loader>
    <ff-shop-states
      state-id="[[ stateId ]]"
      shop-state="{{ state }}"></ff-shop-states>

    <div id="top">
      <ff-bordered-text id="conversation" text="[[ shopkeeperSays ]]"></ff-bordered-text>
      <div id="counter">
        <ff-bordered id="sign" color="purple">[[ sign ]]</ff-bordered>
        <div id="transaction">
          <ff-shopkeepers></ff-shopkeepers>
          <ff-shop-party
            resting="[[ state.resting ]]"></ff-shop-party>
        </div>
      </div>
      <ff-shop-inventory
        id="shopInventory"
        inventory="[[ shopInventory ]]"
        hidden$="[[ !state.showInventory ]]"
        on-ff-selected="_inventorySelected"
        on-ff-back="_previousState"></ff-shop-inventory>
      <ff-shop-inventory
        id="charInventory"
        inventory="[[ charInventory ]]"
        hidden$="[[ !state.showCharInventory ]]"
        on-ff-selected="_charInventorySelected"
        on-ff-back="_previousState"></ff-shop-inventory>
    </div>

    <div id="bottom">
      <ff-shop-decision
        id="shopDecision"
        choices="[[ shopChoices ]]"
        on-ff-selected="_choiceSelected"
        on-ff-back="_previousState"></ff-shop-decision>
      <ff-bordered id="gold" color="green">[[ gold ]] G</ff-bordered>
    </div>
  </template>

  <script src="ff-shop-screen.js"></script>
</dom-module>