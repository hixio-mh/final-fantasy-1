<link rel="import" href="/bower_components/iron-selector/iron-multi-selectable.html">
<link rel="import" href="../ff-keyhandler/ff-keyhandler.html">

<dom-module id="ff-selector">
  <template>
    <style>
      :host ::content .iron-selected {
        position: relative;
      }
      :host ::content .iron-selected:before {
        background-image: url('cursor.png');
        content: ' ';
        height: 32px;
        left: -44px;
        position: absolute;
        top: 4px;
        width: 32px;

        @apply(--ff-selector-cursor);
      }
    </style>

    <content></content>

    <ff-keyhandler
      id="keyHandler"
      on-ff-go="_go"></ff-keyhandler>

  </template>
  <script>
    Polymer({
      is: 'ff-selector',
      behaviors: [
        Polymer.IronMultiSelectableBehavior
      ],

      observers: [
        '_upDownSelectsChanged(upDownSelects)'
      ],

      properties: {
        upDownSelects: Boolean
      },

      _go: function() {
        this.fire('ff-selected', {
          value: this.selected
        });
      },

      _upDownSelectsChanged: function(upDownSelects) {
        var listenFunction = upDownSelects ? this.listen : this.unlisten;
        listenFunction.call(this, this.$.keyHandler, 'ff-up', 'selectPrevious');
        listenFunction.call(this, this.$.keyHandler, 'ff-down', 'selectNext');
      }

    });
  </script>
</dom-module>