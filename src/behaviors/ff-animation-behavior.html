<script>
(function(scope) {
  scope.FF = scope.FF || {};

  function Animation() {
    this.queue = [];
  };

  Object.assign(Animation.prototype, {
    add: function(callback, args) {
      this.queue.push(function() {
        return new Promise(function(resolve) {
          resolve(callback.apply(undefined, args));
        });
      });
      return this;
    },

    delay: function(milliseconds) {
      this.queue.push(function() {
        return new Promise(function(resolve) {
          setTimeout(resolve, milliseconds);
        });
      });
      return this;
    },

    run: function() {
      this.queue.reduce(function(promise, entry) {
        return promise.then(entry);
      }, Promise.resolve());
    }
  });

  scope.FF.AnimationBehavior = {
    createAnimation: function() {
      return new Animation();
    }
  };


}(window));
</script>